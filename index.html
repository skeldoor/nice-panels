<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skeldoor's OSRS Panel Generator</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="homepage.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M5J3QJKJPC"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-M5J3QJKJPC');
    </script>
</head>
<body class="homepage-body">

    <!-- ===================== MOBILE VIEW ===================== -->
    <div class="mobile-only">
        <div class="mobile-container">
            <h1 class="mobile-title">SkelsPanels</h1>
            <div class="mobile-message">
                <p>SkelsPanels is best enjoyed on desktop-sized screens.</p>
                <p class="mobile-submessage">The panel tools need a bit more room to breathe! Grab a laptop or desktop and come back to create some proper OSRS panels.</p>
            </div>

            <div class="mobile-links">
                <div id="mobile-auth-bar">
                    <div id="mobile-auth-loading">Loading...</div>
                    <div id="mobile-auth-logged-out" style="display:none;">
                        <a href="/api/auth/login" class="patreon-login-btn mobile-patreon-btn">Login with Patreon</a>
                    </div>
                    <div id="mobile-auth-logged-in" style="display:none;">
                        <span id="mobile-auth-user-info"></span>
                        <a href="/api/auth/logout" class="auth-logout-btn">Logout</a>
                    </div>
                </div>

                <div class="mobile-patreon-cta">
                    <p>Support the project and unlock all the tools:</p>
                    <a href="https://www.patreon.com/Skeldoor" target="_blank" class="patreon-cta-btn">
                        Become a Patron
                    </a>
                </div>

                <div class="mobile-socials">
                    <a href="https://skeldoor.dev/" target="_blank">Skeldoor.dev</a>
                    <a href="https://www.youtube.com/@Skeldoor" target="_blank">YouTube</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ===================== DESKTOP VIEW ===================== -->
    <div class="desktop-only">
        <div class="homepage-container">
            <!-- Auth Bar -->
            <div id="auth-bar">
                <div id="auth-loading">Loading...</div>
                <div id="auth-logged-out" style="display:none;">
                    <a href="/api/auth/login" class="patreon-login-btn">Login with Patreon</a>
                </div>
                <div id="auth-logged-in" style="display:none;">
                    <span id="auth-user-info"></span>
                    <a href="/api/auth/logout" class="auth-logout-btn">Logout</a>
                </div>
            </div>

            <!-- Hero Section -->
            <div class="hero-section">
                <h1 class="hero-title">Skeldoor's OSRS Panel Generator</h1>
                <p class="hero-subtitle">Create authentic looking Old School RuneScape UI panels in seconds. No Photoshop, no fiddling around, just the tools you need to make your content look properly RuneScape.</p>
            </div>

            <!-- Tool Cards Grid -->
            <div class="tools-grid" id="tools-grid">
                <!-- Cards are populated dynamically -->
            </div>

            <!-- Patreon CTA Section (dynamically populated based on tier) -->
            <div class="patreon-section" id="patreon-section">
                <div class="patreon-section-inner" id="patreon-section-inner">
                    <!-- Content injected by updatePatreonSection() -->
                </div>
            </div>

            <!-- Footer -->
            <footer>
                <a href="https://skeldoor.dev/" target="_blank">Skeldoor</a> - <span id="version"></span>
                <p>If you use this site and you're not <a href="https://www.youtube.com/@Skeldoor" target="_blank">subbed to me</a> I'll be genuinely furious. I'm <span style="color: #5865F2;">Skeldoor on Discord</span> if you wanna msg me.</p>
            </footer>
        </div>
    </div>

    <!-- Patch Notes Modal -->
    <div id="patch-modal" class="setup-modal-overlay" style="display:none;">
        <div class="setup-modal patch-modal">
            <button class="setup-modal-close" onclick="closePatchModal()">&times;</button>
            <div class="patch-modal-header">
                <span class="patch-badge">UPDATE</span>
                <span class="patch-version" id="patch-version"></span>
            </div>
            <div class="patch-modal-body" id="patch-modal-body">
                <!-- Rendered markdown content -->
            </div>
            <button class="setup-modal-btn setup-modal-btn-confirm" onclick="closePatchModal()">Got it!</button>
        </div>
    </div>

    <!-- Setup Modal -->
    <div id="setup-modal" class="setup-modal-overlay" style="display:none;">
        <div class="setup-modal">
            <button class="setup-modal-close" onclick="closeSetupModal()">&times;</button>
            <div id="setup-modal-content">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <script>
        const PATREON_URL = 'https://www.patreon.com/Skeldoor';

        // Tool definitions with descriptions and example images
        const toolCards = [
            {
                key: 'infobox',
                label: 'Info Box Panel',
                path: '/infobox/',
                image: '/examplepanels/infoboxpanelexample.png',
                description: 'The classic OSRS info box, you\'ve already seen your favourite creators using it. Type your text, pick your icons, and download a pixel-perfect panel. Good for YouTube thumbnails, informational popups, or anywhere you need that authentic RuneScape look without faffing with an image editor.'
            },
            {
                key: 'bankview',
                label: 'Bank View Panel',
                path: '/bankview/',
                image: '/examplepanels/bankpanelexample.png',
                description: 'Build a realistic bank screenshot with whatever items you like. Perfect for "finally got the drop" posts, progress video thumbnails, or flexing a bank tab that may or may not actually exist. Your secret is safe with me.'
            },
            {
                key: 'itemcreator',
                label: 'Item Icon Panel',
                path: '/itemcreator/',
                image: '/examplepanels/iconpanelexample.png',
                description: 'Generate clean, crisp item icons with that proper OSRS pixelated look. Great for tidy overlay graphics, just any time you need a standalone item image without screenshotting and cropping for ages.'
            },
            {
                key: 'dialogpanel',
                label: 'Dialog Panel',
                path: '/dialogpanel/',
                image: '/examplepanels/dialogpanelexample.png',
                description: 'Make any NPC say whatever you want. (Use with decorum... or don\'t I\'m just a website!) Craft those iconic OSRS dialog boxes for memes, video intros, or social content that looks like it came straight out of Gielinor.'
            },
            {
                key: 'optionpanel',
                label: 'Option Panel',
                path: '/optionpanel/',
                image: '/examplepanels/optionpanelexample.png',
                description: 'Craft the ideal right-click menu. Build custom context menus for memes, thumbnails, or snazzy edits that catch the eye.'
            },
            {
                key: 'dropsimulator',
                label: 'Loot Calculator Panel',
                badge: 'NEW',
                path: '/dropsimulator/',
                image: '/examplepanels/lootcalcpanelexample.png',
                description: 'Visualise loot tables and calculate statistically average drops summarised in a nicely laid out panel. Estimate the loot you\'re going to get from killing men/women (in runescape) for 6000 hours. Good RNG sold separately.'
            },
            {
                key: 'levelpanel',
                label: 'Level Panel',
                badge: 'NEW',
                path: '/levelpanel/',
                image: '/examplepanels/levelpanelexample.png',
                description: 'Generate that iconic OSRS skill level indicator. Pick your skill, set the top and bottom numbers, and download a pixel-perfect level display. Great for progress updates, or game tasks.'
            },
            {
                key: 'collectionlog',
                label: 'Collection Log',
                badge: 'NEW',
                path: '/collectionlog/',
                image: '/examplepanels/collectionlogpanelexample.png',
                description: 'Create those iconic collection log notification panels. Set your item name, customise the text lines, and download a pixel-perfect log popup. Perfect for fake drops, memes, or video overlays.'
            },
            {
                key: 'orbpanel',
                label: 'Orb Panel',
                badge: 'NEW',
                path: '/orbpanel/',
                image: '/examplepanels/orbpanelexample.png',
                description: 'Generate the hitpoints, prayer, and run energy orbs from the OSRS minimap HUD. Set your value, adjust the fill level to show how full the orb is, and download a pixel-perfect orb indicator. Great for overlays, progress graphics, or HUD mockups.'
            },
        ];

        // Track global auth + panel state
        let currentAuth = { authenticated: false, tier: null };
        let currentPanelConfig = null;
        let setupModalDismissed = false;

        // Fetch version from patch notes API (avoids exposing package.json)
        fetch('/api/patches/latest')
            .then(res => res.json())
            .then(data => {
                if (data.available) {
                    document.getElementById('version').textContent = `v${data.version}`;
                }
            })
            .catch(() => {});

        // Fetch auth state and render everything
        fetch('/api/auth/user')
            .then(res => res.json())
            .then(data => {
                // Store auth state globally
                currentAuth = {
                    authenticated: data.authenticated,
                    tier: data.authenticated && data.user ? data.user.tier : null,
                };
                currentPanelConfig = data.panelConfig || null;

                // === Desktop auth bar ===
                document.getElementById('auth-loading').style.display = 'none';
                if (data.authenticated) {
                    document.getElementById('auth-logged-in').style.display = 'flex';
                    const tierLabel = data.user.tierName
                        ? `<span class="tier-badge tier-${data.user.tier}">${data.user.tierName}</span>`
                        : '<span class="tier-badge tier-none">No active tier</span>';

                    // Config button + change timer
                    let configBtnHtml = '';
                    if (data.user.tier) {
                        let timerHtml = '';
                        if (data.user.tier !== 'full' && currentPanelConfig && currentPanelConfig.configured && !currentPanelConfig.canChange) {
                            const days = Math.ceil(currentPanelConfig.timeUntilChange / (24 * 60 * 60 * 1000));
                            timerHtml = `<span class="config-timer">Change in ${days}d</span>`;
                        }
                        configBtnHtml = `<a href="/setup/" class="config-btn" title="Configure your panels">&#9881;${timerHtml}</a>`;
                    }

                    document.getElementById('auth-user-info').innerHTML =
                        `${data.user.name} ${tierLabel} <span class="patreon-id" title="Your Patreon ID">ID: ${data.user.patreonId}</span>${configBtnHtml}`;
                } else {
                    document.getElementById('auth-logged-out').style.display = 'flex';
                }

                // === Mobile auth bar ===
                document.getElementById('mobile-auth-loading').style.display = 'none';
                if (data.authenticated) {
                    document.getElementById('mobile-auth-logged-in').style.display = 'flex';
                    const mobileTierLabel = data.user.tierName
                        ? `<span class="tier-badge tier-${data.user.tier}">${data.user.tierName}</span>`
                        : '<span class="tier-badge tier-none">No active tier</span>';

                    let mobileConfigBtn = '';
                    if (data.user.tier) {
                        mobileConfigBtn = `<a href="/setup/" class="config-btn" title="Configure your panels">&#9881;</a>`;
                    }

                    document.getElementById('mobile-auth-user-info').innerHTML =
                        `${data.user.name} ${mobileTierLabel}${mobileConfigBtn}`;
                } else {
                    document.getElementById('mobile-auth-logged-out').style.display = 'flex';
                }

                // === Render tool cards & patreon section ===
                renderToolCards(data);
                updatePatreonSection(currentAuth.tier, currentAuth.authenticated);

                // === Show setup modal if needed ===
                if (data.authenticated && data.user.tier && currentPanelConfig && !currentPanelConfig.configured) {
                    showSetupModal(data.user.tier);
                }

                // === Check for unseen patch notes ===
                checkPatchNotes();
            })
            .catch(err => {
                console.error('Auth check failed:', err);
                document.getElementById('auth-loading').style.display = 'none';
                document.getElementById('auth-logged-out').style.display = 'flex';
                document.getElementById('mobile-auth-loading').style.display = 'none';
                document.getElementById('mobile-auth-logged-out').style.display = 'flex';

                renderToolCards({ authenticated: false, tools: {} });
                updatePatreonSection(null, false);
            });

        // ============================================================
        // Patch Notes
        // ============================================================

        /**
         * Simple markdown → HTML converter for patch notes.
         * Handles: headers, bold, lists, paragraphs, horizontal rules.
         */
        function renderMarkdown(md) {
            const lines = md.split('\n');
            let html = '';
            let inList = false;

            for (let i = 0; i < lines.length; i++) {
                let line = lines[i];

                // Horizontal rule
                if (/^---+$/.test(line.trim())) {
                    if (inList) { html += '</ul>'; inList = false; }
                    html += '<hr>';
                    continue;
                }

                // Headers
                if (line.startsWith('### ')) {
                    if (inList) { html += '</ul>'; inList = false; }
                    html += `<h4 class="patch-h4">${line.slice(4)}</h4>`;
                    continue;
                }
                if (line.startsWith('## ')) {
                    if (inList) { html += '</ul>'; inList = false; }
                    html += `<h3 class="patch-h3">${line.slice(3)}</h3>`;
                    continue;
                }
                if (line.startsWith('# ')) {
                    if (inList) { html += '</ul>'; inList = false; }
                    // Skip the top-level title — we show the version in the header
                    continue;
                }

                // List items
                if (line.startsWith('- ')) {
                    if (!inList) { html += '<ul class="patch-list">'; inList = true; }
                    html += `<li>${inlineFormat(line.slice(2))}</li>`;
                    continue;
                }

                // Empty line
                if (line.trim() === '') {
                    if (inList) { html += '</ul>'; inList = false; }
                    continue;
                }

                // Regular paragraph
                if (inList) { html += '</ul>'; inList = false; }
                html += `<p class="patch-text">${inlineFormat(line)}</p>`;
            }

            if (inList) html += '</ul>';
            return html;
        }

        function inlineFormat(text) {
            // Bold: **text**
            text = text.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            // Italic: *text*
            text = text.replace(/\*(.+?)\*/g, '<em>$1</em>');
            // Inline code: `text`
            text = text.replace(/`(.+?)`/g, '<code>$1</code>');
            // Links: [text](url)
            text = text.replace(/\[(.+?)\]\((.+?)\)/g, '<a href="$2" target="_blank">$1</a>');
            return text;
        }

        let patchVersion = null;

        /**
         * Check for unseen patch notes and show the modal if needed.
         * Only runs for authenticated users. Defers to setup modal if that's showing.
         */
        function checkPatchNotes() {
            if (!currentAuth.authenticated) return;

            fetch('/api/patches/latest')
                .then(res => res.json())
                .then(data => {
                    if (!data.available || data.seen) return;

                    patchVersion = data.version;
                    document.getElementById('patch-version').textContent = `v${data.version}`;
                    document.getElementById('patch-modal-body').innerHTML = renderMarkdown(data.content);

                    // Don't show if the setup modal is already visible
                    const setupModal = document.getElementById('setup-modal');
                    if (setupModal && setupModal.style.display !== 'none') {
                        // Wait for setup modal to close, then show patch notes
                        const observer = new MutationObserver(() => {
                            if (setupModal.style.display === 'none') {
                                observer.disconnect();
                                document.getElementById('patch-modal').style.display = 'flex';
                            }
                        });
                        observer.observe(setupModal, { attributes: true, attributeFilter: ['style'] });
                    } else {
                        document.getElementById('patch-modal').style.display = 'flex';
                    }
                })
                .catch(err => console.error('Patch notes check failed:', err));
        }

        function closePatchModal() {
            document.getElementById('patch-modal').style.display = 'none';
            // Mark as seen in Redis
            if (patchVersion) {
                fetch('/api/patches/seen', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ version: patchVersion }),
                }).catch(err => console.error('Failed to mark patch as seen:', err));
            }
        }

        function showSetupModal(tier) {
            const modal = document.getElementById('setup-modal');
            const content = document.getElementById('setup-modal-content');

            if (tier === 'full') {
                content.innerHTML = `
                    <h2 class="setup-modal-title">You're all set!</h2>
                    <p class="setup-modal-text">You've got Full Access — every panel is yours. No need to pick and choose.</p>
                    <button class="setup-modal-btn setup-modal-btn-confirm" onclick="autoConfigFull()">Got it!</button>
                `;
            } else {
                const allowance = currentPanelConfig ? currentPanelConfig.allowance : (tier === 'basic' ? 1 : 3);
                content.innerHTML = `
                    <h2 class="setup-modal-title">Ready to choose your panels?</h2>
                    <p class="setup-modal-text">Your ${tier.charAt(0).toUpperCase() + tier.slice(1)} tier lets you pick ${allowance} panel${allowance !== 1 ? 's' : ''} to use for the next 30 days. Head to the setup page to make your choice.</p>
                    <a href="/setup/" class="setup-modal-btn setup-modal-btn-confirm">Choose My Panels</a>
                `;
            }

            modal.style.display = 'flex';
        }

        function closeSetupModal() {
            document.getElementById('setup-modal').style.display = 'none';
            setupModalDismissed = true;
        }

        async function autoConfigFull() {
            try {
                const allPanelKeys = toolCards.map(t => t.key);
                const res = await fetch('/api/panels/select', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ panels: allPanelKeys }),
                });
                if (res.ok) {
                    window.location.reload();
                }
            } catch (err) {
                console.error('Auto-config full failed:', err);
            }
            closeSetupModal();
        }

        function renderToolCards(authData) {
            const grid = document.getElementById('tools-grid');
            grid.innerHTML = '';
            const isLoggedIn = authData.authenticated;
            const hasTier = currentAuth.tier != null;
            const isConfigured = currentPanelConfig && currentPanelConfig.configured;

            for (const tool of toolCards) {
                const toolAccess = authData.tools ? authData.tools[tool.key] : null;
                const isLocked = toolAccess ? toolAccess.locked : true;

                const card = document.createElement('div');
                card.className = 'tool-card' + (isLocked ? ' tool-card-locked' : '');

                let lockedHref, lockedOnclick, lockedBtnText;

                if (isLocked && isLoggedIn && hasTier && !isConfigured) {
                    // Has tier but hasn't configured — clicking should go to setup
                    lockedHref = '/setup/';
                    lockedOnclick = '';
                    lockedBtnText = 'Set Up Your Panels';
                } else if (isLocked && isLoggedIn && hasTier && isConfigured) {
                    // Configured but this panel isn't selected
                    lockedHref = '/setup/';
                    lockedOnclick = '';
                    lockedBtnText = 'Not in Your Selection';
                } else if (isLocked && isLoggedIn) {
                    // Logged in but no tier
                    lockedHref = PATREON_URL;
                    lockedOnclick = '';
                    lockedBtnText = 'Subscribe on Patreon';
                } else if (isLocked) {
                    // Not logged in
                    lockedHref = tool.path;
                    lockedOnclick = `onclick="return handleLockedClick(event)"`;
                    lockedBtnText = 'Unlock with Patreon';
                }

                const badgeHtml = tool.badge ? `<span class="new-badge">${tool.badge}</span>` : '';

                if (isLocked) {
                    // If user dismissed modal and clicks a locked card, redirect to setup
                    const cardOnclick = (setupModalDismissed && hasTier && !isConfigured)
                        ? `onclick="window.location.href='/setup/'; return false;"`
                        : '';

                    card.innerHTML = `
                        <div class="tool-card-image-wrap">
                            <img src="${tool.image}" alt="${tool.label} example" class="tool-card-image" loading="lazy">
                        </div>
                        <div class="tool-card-body">
                            <h3 class="tool-card-title">
                                <a href="${lockedHref}" ${lockedOnclick} ${isLoggedIn && !hasTier ? 'target="_blank"' : ''}>
                                    ${tool.label}
                                </a>
                                ${badgeHtml}
                                <span class="lock-badge">Locked</span>
                            </h3>
                            <p class="tool-card-desc">${tool.description}</p>
                            <a href="${lockedHref}" class="tool-card-btn tool-card-btn-locked" ${lockedOnclick} ${isLoggedIn && !hasTier ? 'target="_blank"' : ''}>
                                ${lockedBtnText}
                            </a>
                        </div>
                    `;

                    // If modal was dismissed and user has unconfigured tier, redirect on card click
                    if (setupModalDismissed && hasTier && !isConfigured) {
                        card.addEventListener('click', (e) => {
                            e.preventDefault();
                            window.location.href = '/setup/';
                        });
                    }
                } else {
                    card.innerHTML = `
                        <div class="tool-card-image-wrap">
                            <img src="${tool.image}" alt="${tool.label} example" class="tool-card-image" loading="lazy">
                        </div>
                        <div class="tool-card-body">
                            <h3 class="tool-card-title">
                                <a href="${tool.path}">
                                    ${tool.label}
                                </a>
                                ${badgeHtml}
                            </h3>
                            <p class="tool-card-desc">${tool.description}</p>
                            <a href="${tool.path}" class="tool-card-btn">
                                Open Tool
                            </a>
                        </div>
                    `;
                }

                grid.appendChild(card);
            }
        }

        /**
         * Update the Patreon CTA section based on the user's current tier.
         */
        function updatePatreonSection(tier, isLoggedIn) {
            const container = document.getElementById('patreon-section-inner');

            if (tier === 'full') {
                container.innerHTML = `
                    <h2 class="patreon-heading">You've got the full toolkit</h2>
                    <p class="patreon-pitch">Every tool, every feature, all yours. Cheers for the support, it genuinely keeps this whole thing running and improving and I appreciate it muchly. Now go make some panels!</p>
                `;
                return;
            }

            if (tier === 'enhanced') {
                container.innerHTML = `
                    <h2 class="patreon-heading">Want access to every panel?</h2>
                    <p class="patreon-pitch">You're currently picking 3 panels with Enhanced Access. Upgrade to Full Access and get all 8 panels without having to choose — plus anything new I build in the future.</p>
                    <div class="patreon-tiers-row">
                        <div class="patreon-tier-card tier-card-full">
                            <h3>Full Access</h3>
                            <p>Every panel, no choosing required. One sub, the whole lot.</p>
                        </div>
                    </div>
                    <a href="${PATREON_URL}" target="_blank" class="patreon-cta-btn">
                        Upgrade on Patreon
                    </a>
                `;
                return;
            }

            if (tier === 'basic') {
                container.innerHTML = `
                    <h2 class="patreon-heading">Want to pick more panels?</h2>
                    <p class="patreon-pitch">You're on Basic with 1 panel choice. Step up to Enhanced for 3 picks, or go Full Access and get every panel without choosing.</p>
                    <div class="patreon-tiers-row">
                        <div class="patreon-tier-card tier-card-enhanced">
                            <h3>Enhanced Access</h3>
                            <p>Choose 3 panels from the full lineup. More tools, more creative options.</p>
                        </div>
                        <div class="patreon-tier-card tier-card-full">
                            <h3>Full Access</h3>
                            <p>Every panel, no choosing required. One sub, the whole lot.</p>
                        </div>
                    </div>
                    <a href="${PATREON_URL}" target="_blank" class="patreon-cta-btn">
                        Upgrade on Patreon
                    </a>
                `;
                return;
            }

            if (isLoggedIn && !tier) {
                container.innerHTML = `
                    <h2 class="patreon-heading">You're signed in, now unlock the tools</h2>
                    <p class="patreon-pitch">You've got a Patreon account linked, which is a grand start. Pick a tier below to actually get your hands on the panel generators. You choose which panels you want access to.</p>
                    <div class="patreon-tiers-row">
                        <div class="patreon-tier-card tier-card-basic">
                            <h3>Basic Access</h3>
                            <p>Pick 1 panel from the full lineup. Great for getting started.</p>
                            <p class="free-trial-note">Includes a 7-day free trial so you can see just how sick the panels are in action.</p>
                        </div>
                        <div class="patreon-tier-card tier-card-enhanced">
                            <h3>Enhanced Access</h3>
                            <p>Choose 3 panels from the full lineup. More tools, more creative options.</p>
                        </div>
                        <div class="patreon-tier-card tier-card-full">
                            <h3>Full Access</h3>
                            <p>Every panel, no choosing required. One sub, the whole lot.</p>
                        </div>
                    </div>
                    <a href="${PATREON_URL}" target="_blank" class="patreon-cta-btn">
                        Subscribe on Patreon
                    </a>
                `;
                return;
            }

            // Not logged in
            container.innerHTML = `
                <h2 class="patreon-heading">Unlock the full toolkit</h2>
                <p class="patreon-pitch">Subscribe on Patreon and choose which panels you want access to. Spend your time making content instead of wrestling with image editors. It also keeps the site alive and the tools improving.</p>
                <div class="patreon-tiers-row">
                    <div class="patreon-tier-card tier-card-basic">
                        <h3>Basic Access</h3>
                        <p>Pick 1 panel from the full lineup. Great for getting started.</p>
                        <p class="free-trial-note">Includes a 7-day free trial so you can see just how sick the panels are in action.</p>
                    </div>
                    <div class="patreon-tier-card tier-card-enhanced">
                        <h3>Enhanced Access</h3>
                        <p>Choose 3 panels from the full lineup. More tools, more creative options.</p>
                    </div>
                    <div class="patreon-tier-card tier-card-full">
                        <h3>Full Access</h3>
                        <p>Every panel, no choosing required. One sub, the whole lot.</p>
                    </div>
                </div>
                <a href="${PATREON_URL}" target="_blank" class="patreon-cta-btn">
                    Become a Patron
                </a>
            `;
        }

        function handleLockedClick(event) {
            event.preventDefault();
            const proceed = confirm(
                'You need a Patreon subscription to access this tool.\n\nWould you like to log in with Patreon?'
            );
            if (proceed) {
                window.location.href = '/api/auth/login';
            }
            return false;
        }
    </script>
</body>
</html>
