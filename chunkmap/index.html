<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chunk Map ‚Äì SkelsPanels</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/chunkmap/chunkmap.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M5J3QJKJPC"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-M5J3QJKJPC');
    </script>
</head>
<body class="chunkmap-body">

    <!-- Toolbar -->
    <div class="chunkmap-toolbar">
        <a href="/" class="back-link">< Back to Home</a>
        <h1>Chunk Map</h1>

        <div class="toolbar-group">
            <label>Darkness:</label>
            <select id="darknessOpacity">
                <option value="0.5">50%</option>
                <option value="0.575">57%</option>
                <option value="0.65">65%</option>
                <option value="0.7">70%</option>
                <option value="0.75">75%</option>
                <option value="0.8">80%</option>
                <option value="0.85" selected>85%</option>
                <option value="0.9">90%</option>
                <option value="0.95">95%</option>
                <option value="1.0">100%</option>
            </select>
            <label>Tint:</label>
            <input type="color" id="darknessColor" value="#1a0000">
        </div>

        <div class="toolbar-group">
            <label>Grid:</label>
            <select id="gridToggle">
                <option value="off">Off</option>
                <option value="on" selected>On</option>
            </select>
            <label>Grid Color:</label>
            <input type="color" id="gridColor" value="#ffffff">
            <label>Grid Opacity:</label>
            <select id="gridOpacity">
                <option value="0.08">8%</option>
                <option value="0.15" selected>15%</option>
                <option value="0.25">25%</option>
                <option value="0.4">40%</option>
            </select>
        </div>

        <div class="toolbar-group">
            <label>Glow:</label>
            <select id="glowToggle">
                <option value="off">Off</option>
                <option value="on" selected>On</option>
            </select>
            <input type="color" id="glowColor" value="#ff1a1a">
            <label>Size:</label>
            <input type="range" id="glowSize" min="0" max="200" value="85" class="toolbar-range">
            <label>Intensity:</label>
            <input type="range" id="glowIntensity" min="0" max="100" value="90" class="toolbar-range">
            <label>Power:</label>
            <input type="range" id="glowPower" min="1" max="8" value="3" class="toolbar-range">
            <label>Border:</label>
            <input type="range" id="glowBorder" min="0" max="100" value="80" class="toolbar-range">
            <label>Corners:</label>
            <select id="glowCorners">
                <option value="square" selected>Square</option>
                <option value="round">Round</option>
            </select>
        </div>

        <div class="toolbar-group toolbar-group-perspective">
            <label>Tilt X:</label>
            <input type="range" id="perspTilt" min="-60" max="60" value="0" class="toolbar-range">
            <label>Tilt Y:</label>
            <input type="range" id="perspTiltY" min="-60" max="60" value="0" class="toolbar-range">
            <label>Rotate:</label>
            <input type="range" id="perspRotate" min="-45" max="45" value="0" class="toolbar-range">
        </div>

        <div class="toolbar-group">
            <label>Icon:</label>
            <select id="skullSize">
                <option value="25">Small</option>
                <option value="50" selected>Medium</option>
                <option value="100">Large</option>
                <option value="150">Very Large</option>
            </select>
            <label>Position:</label>
            <select id="skullPosition">
                <option value="top-right" selected>Top Right</option>
                <option value="top-left">Top Left</option>
                <option value="bottom-right">Bottom Right</option>
                <option value="bottom-left">Bottom Left</option>
                <option value="center">Center</option>
            </select>
        </div>

        <button class="toolbar-btn" id="clearBtn">Lock All</button>
        <button class="toolbar-btn" id="unlockAllBtn">Unlock All</button>
        <button class="toolbar-btn" id="saveBtn">Export Image</button>

        <span class="chunk-counter" id="chunkCounter">0 / 0 chunks unlocked</span>
        <span class="toolbar-hint" id="hintText">Shift+Click to unlock ¬∑ Ctrl+Click to cycle marker (Skull ‚Üí Red Skull ‚Üí Lock)</span>
    </div>

    <!-- Map viewport -->
    <div class="chunkmap-viewport" id="viewport">
        <div class="chunkmap-canvas-wrap" id="canvasWrap">
            <img id="mapImage" src="/chunkmap/osrs_world_map.png" draggable="false">
            <canvas id="chunkOverlay"></canvas>
            <canvas id="gridOverlay"></canvas>
            <canvas id="skullOverlay"></canvas>
        </div>

        <!-- Queue sidebar (inside viewport so it's positioned relative to map area) -->
        <div class="queue-sidebar" id="queueSidebar">
            <div class="queue-header">
                <h3>Unlock Queue</h3>
                <button class="toolbar-btn queue-toggle-btn" id="queueToggleBtn" title="Toggle sidebar">‚óÄ</button>
            </div>
            <div class="queue-controls">
                <label>Delay:</label>
                <input type="range" id="queueDelay" min="50" max="3000" value="500" step="50" class="toolbar-range" style="width:90px;">
                <span id="queueDelayLabel">500ms</span>
                <label>Effect:</label>
                <select id="animStyle">
                    <option value="grow" selected>Grow</option>
                    <option value="fade">Fade</option>
                    <option value="wipe">Wipe Down</option>
                    <option value="radar">Radar Sweep</option>
                    <option value="diamond">Diamond</option>
                    <option value="pixelate">Pixelate</option>
                </select>
            </div>
            <div class="queue-controls">
                <button class="toolbar-btn" id="queuePlayBtn">‚ñ∂ Play</button>
                <button class="toolbar-btn" id="queueResetBtn" title="Lock all queued chunks so they're ready to animate">‚èÆ Reset</button>
                <button class="toolbar-btn" id="queueLoopBtn">üîÅ Loop</button>
                <button class="toolbar-btn" id="queueClearBtn">Clear</button>
            </div>
            <div class="queue-hint">Hover chunk + press 1 to add</div>
            <ol class="queue-list" id="queueList"></ol>
        </div>
    </div>

    <!-- Tooltip -->
    <div class="chunk-tooltip" id="tooltip"></div>

    <!-- Minimap -->
    <div class="chunkmap-minimap" id="minimapWrap">
        <canvas id="minimap"></canvas>
        <div class="minimap-viewport" id="minimapViewport"></div>
    </div>

    <!-- Save overlay -->
    <div class="save-overlay" id="saveOverlay">
        <div class="save-modal">
            <h2>Export Chunk Map</h2>
            <p style="color:#ccc; font-family:'RuneScape UF',sans-serif; font-size:13px;">
                Choose export option:
            </p>
            <button class="toolbar-btn" id="exportFull">Full Map</button>
            <button class="toolbar-btn" id="exportView">Current View</button>
            <br><br>
            <button class="toolbar-btn" id="cancelExport" style="background:#333;">Cancel</button>
        </div>
    </div>

    <script src="/chunkmap/chunkmap.js"></script>
</body>
</html>
