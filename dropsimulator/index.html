<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Skeldoor's Loot Calculator</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/dropsimulator/dropsimulator.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M5J3QJKJPC"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-M5J3QJKJPC');
    </script>
</head>
<body class="loot-calculator-body">

    <div class="container">
        <a href="/" class="back-link">< Back to Home</a>
        <h1>Skeldoor's Loot Calculator</h1>

        <div class="loot-controls">
            <div class="control-row">
                <label>Monster:</label>
                <input type="text" id="monsterInput" placeholder="Monster name or wiki URL (e.g. Black dragon)" value="Shellbane gryphon">
                <button id="fetchBtn">Fetch Drops</button>
            </div>
            <div id="statusMessage" class="status-message"></div>
            <div class="control-row">
                <label>Drop Table:</label>
                <select id="dropVersion">
                    <option value="">-- Fetch a monster first --</option>
                </select>
            </div>
            <div class="control-row">
                <label>Section:</label>
                <select id="dropSection">
                    <option value="_all">All Sections</option>
                </select>
            </div>
            <div class="control-row">
                <label>Kill Count:</label>
                <input type="number" id="killCount" value="256" min="0" max="10000000">
                <label>Sort:</label>
                <select id="sortOrder">
                    <option value="wiki">Wiki Order</option>
                    <option value="rate-desc">Rarest First</option>
                    <option value="rate-asc">Most Common First</option>
                    <option value="qty-desc">Highest Expected First</option>
                    <option value="alpha">Alphabetical</option>
                </select>
            </div>
            <div class="control-row">
                <label class="checkbox-label">
                    <input type="checkbox" id="probMode">
                    Probability Mode <span class="prob-hint">(shows % chance of at least 1 drop)</span>
                </label>
            </div>
            <div class="control-row">
                <label>Width:</label>
                <input type="number" id="panelWidth" value="400" min="200" max="1920" step="10">
                <label>Height:</label>
                <input type="number" id="panelHeight" value="0" min="0" max="1080" step="10" placeholder="Auto">
                <label>Padding:</label>
                <input type="number" id="panelPadding" value="26" min="0" max="60" step="1">
                <label>Scale:</label>
                <input type="number" id="scale" value="2" min="1" max="3">
                <label>Frame:</label>
                <select id="frameType">
                    <option value="frame1">Frame 1</option>
                    <option value="frame2">Frame 2</option>
                    <option value="frame3">Frame 3</option>
                </select>
            </div>
            <div class="control-row">
                <label>Preset:</label>
                <select id="sizePreset">
                    <option value="custom">Custom</option>
                    <option value="1920x1080">Full Screen (1920x1080)</option>
                    <option value="1280x720">HD (1280x720)</option>
                    <option value="800x600">Small (800x600)</option>
                    <option value="400x0">Panel (400 wide, auto height)</option>
                </select>
                <label>Columns:</label>
                <input type="number" id="lootColumns" value="1" min="1" max="6" step="1">
                <label>Title Color:</label>
                <input type="color" id="titleColor" value="#FF981F">
                <label>BG Color:</label>
                <input type="color" id="bgColor" value="#494034">
            </div>
        </div>

        <div class="save-controls">
            <button id="saveButton" class="save-button">Save Panel as Image</button>
        </div>

        <div class="panel-container">
            <div class="custom-panel" id="panel">
                <div class="corner tl"></div>
                <div class="edge top"></div>
                <div class="corner tr"></div>
                <div class="edge left"></div>
                <div id="panelContent" class="content">
                    <div class="shadow-overlay"></div>
                    <div class="loot-header">
                        <div class="monster-title">Loot Calculator</div>
                        <div class="kill-subtitle">Enter a monster name to begin</div>
                    </div>
                </div>
                <div class="edge right"></div>
                <div class="corner bl"></div>
                <div class="edge bottom"></div>
                <div class="corner br"></div>
            </div>
        </div>
    </div>

    <script src="/dropsimulator/dropsimulator.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dom-to-image-more@3.6.0/dist/dom-to-image-more.min.js"></script>
</body>
</html>
